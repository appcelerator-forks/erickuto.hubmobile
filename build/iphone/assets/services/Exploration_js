function getCommunities(e){for(i=0;i<communities.length;i++)e.push(communities[i])}function getFreeTags(e){for(i=0;i<freeTags.length;i++)e.push(freeTags[i])}function getTargetPopulations(e){for(i=0;i<targetPopulations.length;i++)e.push(targetPopulations[i])}function getRegions(e){for(i=0;i<regions.length;i++)e.push(regions[i].name)}function getCountries(e){userRegions=hub.API.user.getSelectedOptions("regions");for(i=0;i<userRegions.length;i++){index=userRegions[i];for(j=0;j<regions[index].countries.length;j++)e.push(regions[index].countries[j].name)}}function getCities(e){userRegions=hub.API.user.getSelectedOptions("regions"),userCountries=hub.API.user.getSelectedOptions("countries");for(i=0;i<userRegions.length;i++){indexRegion=userRegions[i];for(j=0;j<userCountries.length;j++){indexCountry=userCountries[j];if(regions[indexRegion]&&regions[indexRegion].countries[indexCountry]){subLocations=regions[indexRegion].countries[indexCountry].subLocations;if(subLocations)for(k=0;k<subLocations.length;k++)e.push(subLocations[i])}}}}function getFieldsOfWork(e){for(i=0;i<fieldsOfWork.length;i++)e.push(fieldsOfWork[i])}function getGroups(e){userCommunities=hub.API.user.getSelectedOptions("communities");for(i=0;i<userCommunities.length;i++){index=userCommunities[i];for(j=0;j<groups[index].length;j++)e.push(groups[index][j])}}function getPeople(e){for(i=0;i<people.length;i++)e.push(people[i])}function Exploration(e){var t=3;hub=require("hub"),Connection=require("services/Connection"),getParams=[],getParams.push({key0:"auth_token",value0:hub.API.user.getAuthToken()});var n=new Connection({start:function(){e.start&&e.start()},error:function(){e.error&&e.error()},success:function(t){communities=[],targetPopulations=[],regions=[],fieldsOfWork=[],people=[],groups=[],freeTags=[];for(i=0;i<t.communities.length;i++)communities.push(t.communities[i].title),groups.push(t.communities[i].groups);for(i=0;i<t.targetPopulations.length;i++)targetPopulations.push(t.targetPopulations[i]);for(i=0;i<t.regions.length;i++){region=t.regions[i],countries=[];for(j=0;j<region.countries.length;j++)country=region.countries[j],subLocations=country.subLocations,countryObject={name:country.title,subLocations:subLocations},countries.push(countryObject);regionObject={name:region.title,countries:countries},regions.push(regionObject)}for(i=0;i<t.fieldsOfWork.length;i++)fieldsOfWork.push(t.fieldsOfWork[i]);for(i=0;i<t.userTypes.length;i++)people.push(t.userTypes[i]);for(i=0;i<t.freeTags.length;i++)freeTags.push(t.freeTags[i]);e.success()}},"tags",[],"GET",getParams);this.getChoices=function(e,t){if(e=="communities")return getCommunities(t);if(e=="target")return getTargetPopulations(t);if(e=="fields")return getFieldsOfWork(t);if(e=="regions")return getRegions(t);if(e=="countries")return getCountries(t);if(e=="people")return getPeople(t);if(e=="groups")return getGroups(t);if(e=="cities")return getCities(t);if(e=="free")return getFreeTags(t);t=[]},this.isReady=function(){return isReady}}hub=require("hub");var communities=[],targetPopulations=[],regions=[],fieldsOfWork=[],people=[],groups=[],freeTags=[];module.exports=Exploration