function userView(e){hub=require("hub");var t=hub.API.hsf,n=hub.API.wsf,r=Ti.UI.createWindow({backgroundColor:hub.API.customBgColor,layout:"vertical",modal:!0,navBarHidden:!0,tabBarHidden:!0}),i=Ti.UI.createView({top:0,width:hub.API.app_width,layout:"vertical"}),s,o;if(hub.API.osname==="mobileweb"){var u=Ti.UI.createView({top:0,width:hub.API.app_width,height:85*t,backgroundImage:hub.API.imagePath("navbar_background.png")});s=Ti.UI.createImageView({left:5,top:6,width:100*n,image:hub.API.imagePath("sign_out.png"),backgroundColor:"#d0ddef"}),o=Ti.UI.createImageView({right:5,top:6,width:100*n,image:hub.API.imagePath("help.png"),backgroundColor:"#d0ddef"}),ashoka_logo=Ti.UI.createImageView({top:6,width:250*n,image:hub.API.imagePath("ashoka_logo_navbar.png")}),o.addEventListener("click",function(){Ti.App.globalWindow=r,Ti.App.fireEvent("closeWindow",{})}),u.add(s),u.add(o),u.add(ashoka_logo),i.add(u)}else if(hub.API.osname==="iphone"||hub.API.osname==="ipad"){r.showNavBar(),r.titleImage=hub.API.imagePath("ashoka_iphone_logo_navbar.png"),r.barColor="#d0ddef";var s=Ti.UI.createButtonBar({labels:[{title:"Sign Out",image:hub.API.imagePath("back_nav_btn.png")}],backgroundColor:"#d0ddef",width:60}),o=Ti.UI.createButtonBar({labels:[{title:" Help",image:hub.API.imagePath("help_nav_btn.png")}],backgroundColor:"#d0ddef",width:60});r.leftNavButton=s,r.rightNavButton=o}else{var u=Ti.UI.createView({top:0,width:hub.API.app_width,height:85*t,backgroundImage:hub.API.imagePath("navbar_background.png")});ashoka_logo=Ti.UI.createImageView({top:6,width:250*n,image:hub.API.imagePath("ashoka_logo_navbar.png")}),u.add(ashoka_logo),i.add(u)}s.addEventListener("click",function(){hub.API.closeWindow()}),helpEvent=function(){hub.API.homeWindow()},o.addEventListener("click",helpEvent);var a=Ti.UI.createView({width:hub.API.app_width,height:hub.API.app_height-220*t});i.add(a);var f=Ti.UI.createView({bottom:0,width:hub.API.app_width,height:130*t,backgroundColor:"#BDBDBD",layout:"horizontal"});i.add(f);var l=function(e){var t="ui/common/dashboardViews/"+e;PageView=require(t),pageView=new PageView,hub.API.openWindow(pageView)},c=function(e){var t=function(){};if(e==="Profile")t=function(){hub.API.fetchNeon("/users/4139",{start:function(){showIndicator("Fetching profile information ...")},error:function(){Ti.API.info("Error Fetching information"),hideIndicator()},success:function(e){hub.API.user.profile=e.userData,hideIndicator(),l("ProfileView")}})};else if(e=="Inbox")t=function(){hub.API.fetchMessages("count",0,{start:function(){showIndicator("Fetching Messages ...")},error:function(){Ti.API.info("Error Fetching Messages"),hideIndicator()},success:function(){hideIndicator(),l("MessageView")}})};else if(e==="Activity")var t=function(){l("ActivityView")};else if(e==="Explore")t=function(){Exploration=require("services/Exploration"),hub.API.explorer=new Exploration({start:function(){showIndicator("Fetching Exploration data ...")},error:function(){Ti.API.info("Error Fetching Exploration data"),hideIndicator()},success:function(e){hideIndicator(),l("ExploreView")}})};else if(e==="Create")var t=function(){l("CreateView")};else e==="Inbox";return t},h=["Activity","Explore","Create","Profile","Inbox"],p=hub.API.app_width/h.length-1;for(var d=0;d<h.length;d++){iconImageHeight=70*t,image_path="navigation_icons/"+h[d]+".png",iconImageHeight>70&&(iconImageHeight=70),left_margin=1,d==0&&(left_margin=0);var v=Ti.UI.createView({backgroundColor:hub.API.customBgColor,width:p,left:left_margin,top:1,layout:"vertical"}),m=Ti.UI.createImageView({top:0,height:iconImageHeight,image:hub.API.imagePath(image_path)}),g=c(h[d]);h[d]!=e?(m.addEventListener("click",g),v.backgroundColor=hub.API.customBgColor):v.backgroundColor="#BDBDBD";var y=Ti.UI.createLabel({top:5,font:{fontSize:15*t,fontFamily:hub.API.customFont},color:"black",text:h[d]});v.add(m),v.add(y),f.add(v)}r.add(i),r.addOnCloseEvent=function(e){r.addEventListener("close",function(){Ti.App.fireEvent(e)})};var b;Ti.Platform.name==="iPhone OS"?b=Ti.UI.iPhone.ActivityIndicatorStyle.BIG:b=Ti.UI.ActivityIndicatorStyle.BIG,indicatorHolder=Ti.UI.createView({height:"100",backgroundColor:"#000",layout:"horizontal",width:"90%",opacity:.8}),indicator=Ti.UI.createActivityIndicator({style:b,font:{fontFamily:"Arial",fontSize:18,fontWeight:"bold"},color:"#FFF",height:70,width:70,left:"5"}),indicatorLabel=Ti.UI.createLabel({font:{fontFamily:"Arial",fontSize:18,fontWeight:"bold"},color:"#FFF",text:"Loading...",width:"auto",height:"auto",left:"10"}),indicatorHolder.add(indicator),indicatorHolder.add(indicatorLabel);var w=Ti.UI.createWindow({backgroundColor:"#000",opacity:.5,navBarHidden:!0});w.add(indicatorHolder),this.addContent=function(e){a.add(e)},showNavBar=function(){if(hub.API.osname==="android")return;r.navBarHidden=!1,r.tabBarHidden=!1},hideNavBar=function(){if(hub.API.osname==="android")return;r.navBarHidden=!0,r.tabBarHidden=!0},showIndicator=function(e){function s(){i>=n&&(w.close(),clearInterval(hub.API.loaderAnimate)),i>=r&&(indicatorLabel.text="Hub mobile is taking too long to respond please try again in a few minutes."),i+=t,Ti.API.info(i/1e3)}e===""?indicatorLabel.text="Loading...":indicatorLabel.text=e;var t=1e3,n=1e4,r=7e3,i=0;hub.API.loaderAnimate=setInterval(s,t),w.addEventListener("open",function(e){indicator.show()}),w.open()},hideIndicator=function(){w.close(),clearInterval(hub.API.loaderAnimate)},this.hideIndicator=hideIndicator,this.showNavBar=showNavBar,this.hideNavBar=hideNavBar,this.showIndicator=showIndicator,this.changeRightButtonEvent=function(e,t){o.removeEventListener("click",helpEvent),o.addEventListener("click",e),image_text=t+"_nav_btn.png",o.labels=[{title:t,image:hub.API.imagePath(image_text)}]},this.addOnCloseEvent=function(e){r.addEventListener("close",function(){Ti.App.fireEvent(e)})},userView.prototype.appwin=r}module.exports=userView