function selectActivity(e){e==="all"?(selectedRadio.top=all_activity_offset,unselectedRadio.top=select_activity_offset,selectedRadio.activity="all",unselectedRadio.activity="select"):(selectedRadio.top=select_activity_offset,unselectedRadio.top=all_activity_offset,selectedRadio.activity="select",unselectedRadio.activity="all"),staticView.add(selectedRadio),staticView.add(unselectedRadio)}function buildExploreWindow(){var e=Ti.UI.createView({top:0,backgroundColor:hub.API.customBgColor,width:"100%",layout:"vertical"});e.addEventListener("filterExploration",function(e){SelectorView=require("ui/common/dashboardViews/exploreViews/SelectorView");var t=new SelectorView(e.category,hub.API.explorer);hub.API.openWindow(t)});var t=Ti.UI.createView({top:0,layout:"vertical",height:50}),n=Ti.UI.createView({top:0,height:40,width:350,layout:"horizontal"}),n=Ti.UI.createView({top:0,left:5,height:40,width:350,layout:"horizontal"}),r=Ti.UI.createSearchBar({top:0,left:0,hintText:"Enter Free Tags",barColor:"#f6f6f6",width:260,value:""}),i=Ti.UI.createButton({top:8,borderRadius:1,width:50,height:25,right:3,title:"Cancel",font:{fontSize:12}});n.add(r),n.add(i),t.add(n),i.addEventListener("click",function(e){r.blur()}),e.add(t);var s=Ti.UI.createLabel({top:5,text:"All Activity",color:hub.API.customTextColor,height:30,font:{fontSize:18},left:35}),o=Ti.UI.createLabel({top:35,text:"Activity I follow",color:hub.API.customTextColor,height:30,font:{fontSize:18},left:35}),u=Ti.UI.createLabel({top:75,text:"Filter by:",color:hub.API.customTextColor,height:30,font:{fontWeight:"bold",fontSize:18},left:5}),a=Ti.UI.createButton({top:5,width:150*wsf,height:75*hsf,right:10,borderRadius:1,backgroundImage:hub.API.imagePath("search_button.png")});a.addEventListener("click",function(e){var t={start:function(){win.showIndicator("Fetching Search Results ...")},error:function(){Ti.API.info("Error Search Results"),win.hideIndicator()},success:function(){win.hideIndicator(),SearchView=require("ui/common/dashboardViews/exploreViews/SearchView");var e=new SearchView;hub.API.openWindow(e)}};hub.API.fetchResults("activities/count","most_recent",0,t)}),staticView.add(s),staticView.add(u),staticView.add(o),selectActivity("select");var f=[],l=Ti.UI.createTableView({top:0,separatorColor:"transparent",backgroundColor:hub.API.customBgColor}),c=[];c.push("People"),c.push("Communities"),c.push("Groups"),c.push("Regions"),c.push("Countries"),c.push("Cities States and Provinces"),c.push("Fields of Work"),c.push("Target Populations"),c.push("Free Tags");var h=[];h.push(addRowView(staticView));for(var p=0;p<c.length;p++)h.push(createMenuRow(c[p]));h.push(addRowView(a)),l.setData(h);var d=function(){var e=l.data[0].rows;for(var t=1;t<e.length-1;t++){var n="",r=user.getSelectedSize(e[t].category);r>0&&(n="("+r+")"),e[t].sizeLabel.text=n}};return Ti.App.addEventListener("updateSizes",function(){d()}),d(),e.add(l),e}function ExploreView(e){var t=require("ui/common/UserView");return win=new t("Explore"),self=buildExploreWindow(),win.addContent(self),thisWindow=win.appwin,thisWindow}hub=require("hub");var hsf=hub.API.hsf,wsf=hub.API.wsf,margin_offset=(hub.API.app_width-350*wsf)/2,all_activity_offset=0,select_activity_offset=30,user=hub.API.user,selectedRadio=Ti.UI.createButton({top:0,left:0,width:40,height:40,borderRadius:1,action:"unselect",activity:"all",backgroundImage:hub.API.imagePath("radio_selected.png")}),radioAction=function(e){var t=e.source.action,n=e.source.activity;t==="unselect"&&(n==="all"?n="select":n="all"),selectActivity(n)};selectedRadio.addEventListener("click",radioAction);var staticView=Ti.UI.createView({top:0,height:110}),unselectedRadio=Ti.UI.createButton({top:30,left:0,width:40,height:40,borderRadius:1,action:"select",activity:"select",backgroundImage:hub.API.imagePath("radio_unselected.png")});unselectedRadio.addEventListener("click",radioAction);var createMenuRow=function(e){var t=e.split(" ")[0].toLowerCase(),n=user.getSelectedSize(t),r=Ti.UI.createTableViewRow({className:"itemRow",category:t,hasChild:!0}),i=Ti.UI.createView({backgroundColor:"e5eaf0",bottom:5,height:40,width:hub.API.app_width-10,right:5,left:5,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,borderColor:"#e0e0e0",borderRadius:5,borderWidth:1,layout:"horizontal"}),s=Ti.UI.createLabel({text:e,width:"auto",color:"#5e656a",left:5,top:10,font:{fontSize:16}}),o="";n>0&&(o="("+n+")");var u=Ti.UI.createLabel({text:o,color:"#5e656a",width:"auto",left:5,top:10,font:{fontSize:16}});return r.sizeLabel=u,i.add(s),i.add(u),r.add(i),r.addEventListener("click",function(e){r.fireEvent("filterExploration",{category:t})}),r},addRowView=function(e){var t=Ti.UI.createTableViewRow({hasChild:!1,touchEnabled:!1,selectionStyle:Ti.UI.iPhone.TableViewCellSelectionStyle.NONE,focusable:!1});return t.add(e),t};module.exports=ExploreView