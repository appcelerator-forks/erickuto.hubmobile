function MessageView(e){function s(){var e=Ti.UI.createView({backgroundColor:hub.API.customBgColor,layout:"vertical"}),t=Ti.UI.createTableView({top:0,separatorColor:"transparent",backgroundColor:hub.API.customBgColor}),n=["inbox","sent","archived"],r=[];for(var s=0;s<n.length;s++)r.push(i(n[s]));return t.setData(r),e.add(t),e}hub=require("hub");var t=hub.API.app_width/5.1,n=(hub.API.app_width-350*hub.API.wsf)/2,r=function(e){var t={start:function(){win.showIndicator("Fetching "+e+"...")},error:function(){Ti.API.info("Error Fetching "+e),win.hideIndicator()},success:function(){win.hideIndicator(),MessageListView=require("ui/common/dashboardViews/messageViews/MessageListView");var t=new MessageListView(e);hub.API.openWindow(t)}};hub.API.fetchMessages(e,0,t)},i=function(e){var t=Ti.UI.createTableViewRow({className:"itemRow",hasChild:!0}),n=Ti.UI.createView({backgroundColor:"e5eaf0",bottom:5,height:60,width:hub.API.app_width-10,right:5,left:5,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,borderColor:"#e0e0e0",borderRadius:5,borderWidth:1,layout:"horizontal"}),i=Ti.UI.createImageView({image:hub.API.imagePath("message_"+e+"_unselected.png"),height:30,width:30,left:7,top:20});labelText=e.charAt(0).toUpperCase()+e.slice(1);var s=Ti.UI.createLabel({text:labelText,width:"auto",color:"#5e656a",left:10,top:20,font:{fontSize:16}}),o="",u=hub.API.messages.getCounts(labelText);u>0&&(o="("+u+")");var a=Ti.UI.createLabel({text:o,color:"#5e656a",width:"auto",left:5,top:20,font:{fontSize:16}});return t.sizeLabel=a,n.add(i),n.add(s),n.add(a),t.add(n),t.addEventListener("click",function(t){r(e)}),t},o=require("ui/common/UserView");message_win=new o("Inbox"),self=s(),message_win.addContent(self);var u=function(){hub.API.newMessage()};return message_win.changeRightButtonEvent(u,"new"),thisWindow=message_win.appwin,thisWindow}module.exports=MessageView